<!DOCTYPE html>
<html lang="en">
<head>
<title>Miniature Earth | Hologram Demo</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<link rel="stylesheet" href="hologram/style.css">
<script src="../miniature.earth.core.js"></script>

<script>

if ( location.protocol == 'file:' ) {
	alert( 'This demo does not work with the file protocol due to browser security restrictions.' );
}


var myearth;
var sprites = [];

window.addEventListener( 'load', function() {

	myearth = new Earth( 'myearth', {
	
		location : { lat: 20, lng : 20 },
	
		light: 'none',

		mapImage: 'hologram/hologram-map.svg',
		transparent: true,
		
		autoRotate : true,
		autoRotateSpeed: 1.2,
		autoRotateDelay: 100,
		autoRotateStart: 2000,			
		
	} );
	
	
	myearth.addEventListener( "ready", function() {

		this.startAutoRotate();

		// connections
		
		var line = {
			color : '#009CFF',
			opacity: 0.35,
			hairline: true,
			offset: -0.5
		};
		
		for ( var i in connections ) {			
			line.locations = [ { lat: connections[i][0], lng: connections[i][1] }, { lat: connections[i][2], lng: connections[i][3] } ];
			this.addLine( line );
		}
		
		
		
		// add 8 shine sprites
		
		for ( var i=0; i < 8; i++ ) {
			sprites[i] = this.addSprite( {
				image: 'hologram/hologram-shine.svg',
				scale: 0.01,
				offset: -0.5,
				opacity: 0.5
			} );
			pulse( i );
		}
		
		
	} );
	
	
} );


function getRandomInt(min, max) {
	min = Math.ceil(min);
	max = Math.floor(max);
	return Math.floor(Math.random() * (max - min)) + min;
}


function pulse( index ) {
	var random_location = connections[ getRandomInt(0, connections.length-1) ];
	sprites[index].location = { lat: random_location[0] , lng: random_location[1] };
	
	sprites[index].animate( 'scale', 0.5, { duration: 320, complete : function(){
		this.animate( 'scale', 0.01, { duration: 320, complete : function(){
			setTimeout( function(){ pulse( index ); }, getRandomInt(100, 400) );
		} });
	} });
}



// locations conntected by lines and places where hologram shines appear

var connections = [
	// Australia & New Zealand
	[-33.8688, 151.2093, -41.2865, 174.7762], // Sydney to Wellington
	
	// Benelux internal connections
	[52.3676, 4.9041, 50.8503, 4.3517], // Amsterdam to Brussels
	[50.8503, 4.3517, 49.6116, 6.1319], // Brussels to Luxembourg
	
	// Brazil major cities
	[-23.5505, -46.6333, -22.9068, -43.1729], // São Paulo to Rio de Janeiro
	[-15.8267, -47.9218, -23.5505, -46.6333], // Brasília to São Paulo
	
	// Bulgaria
	[42.6977, 23.3219, 42.1354, 24.7453], // Sofia to Plovdiv
	
	// Canada major cities
	[45.5017, -73.5673, 43.6532, -79.3832], // Montreal to Toronto
	[49.2827, -123.1207, 45.5017, -73.5673], // Vancouver to Montreal
	
	// Costa Rica
	[9.9281, -84.0907, 10.6339, -85.4408], // San José to Liberia
	
	// France major cities
	[48.8566, 2.3522, 45.764, 4.8357], // Paris to Lyon
	[45.764, 4.8357, 43.2965, 5.3698], // Lyon to Marseille
	
	// Guatemala
	[14.6349, -90.5069, 15.7835, -90.2308], // Guatemala City to Flores
	
	// Germany major cities
	[52.5200, 13.4050, 48.1351, 11.5820], // Berlin to Munich
	[50.9375, 6.9603, 52.5200, 13.4050], // Cologne to Berlin
	
	// Hungary
	[47.4979, 19.0402, 46.2530, 20.1414], // Budapest to Szeged
	
	// Iberia (Spain & Portugal)
	[40.4168, -3.7038, 38.7223, -9.1393], // Madrid to Lisbon
	[41.3851, 2.1734, 40.4168, -3.7038], // Barcelona to Madrid
	
	// India & Sri Lanka
	[28.7041, 77.1025, 19.0760, 72.8777], // New Delhi to Mumbai
	[6.9271, 79.8612, 28.7041, 77.1025], // Colombo to New Delhi
	
	// Italy major cities
	[41.9028, 12.4964, 45.4642, 9.1900], // Rome to Milan
	[40.8518, 14.2681, 41.9028, 12.4964], // Naples to Rome
	
	// Japan major cities
	[35.6762, 139.6503, 34.6937, 135.5023], // Tokyo to Osaka
	[43.0642, 141.3469, 35.6762, 139.6503], // Sapporo to Tokyo
	
	// Mexico major cities
	[19.4326, -99.1332, 25.6866, -100.3161], // Mexico City to Monterrey
	[20.6597, -103.3496, 19.4326, -99.1332], // Guadalajara to Mexico City
	
	// Morocco
	[33.9716, -6.8498, 31.6295, -7.9811], // Rabat to Marrakech
	
	// Nordics connections
	[59.9139, 10.7522, 59.3293, 18.0686], // Oslo to Stockholm
	[60.1699, 24.9384, 55.6761, 12.5683], // Helsinki to Copenhagen
	
	// Romania
	[44.4268, 26.1025, 46.7712, 23.6236], // Bucharest to Cluj-Napoca
	
	// South Africa
	[-33.9249, 18.4241, -26.2041, 28.0473], // Cape Town to Johannesburg
	
	// Southeast Asia connections
	[13.7563, 100.5018, 1.3521, 103.8198], // Bangkok to Singapore
	[14.5995, 120.9842, 13.7563, 100.5018], // Manila to Bangkok
	
	// Switzerland
	[46.9481, 7.4474, 47.3769, 8.5417], // Bern to Zurich
	
	// United Kingdom
	[51.5074, -0.1278, 55.9533, -3.1883], // London to Edinburgh
	[53.4808, -2.2426, 51.5074, -0.1278], // Manchester to London
	
	// US major connections
	[40.7128, -74.0060, 34.0522, -118.2437], // New York to Los Angeles
	[41.8781, -87.6298, 29.7604, -95.3698], // Chicago to Houston
	[37.7749, -122.4194, 47.6062, -122.3321], // San Francisco to Seattle
];


</script>

</head>

<body>

	<div id="myearth">
		<div id="glow"></div>
	</div>

</body>
</html>
